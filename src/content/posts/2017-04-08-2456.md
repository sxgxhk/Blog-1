---
title: 让TYPECHO评论头像旋转方法等
author: Feng
type: post
published: 2017-04-08T15:04:00+00:00
url: /it/365.html
hera_post_view:
  - 15
categories:
  - IT网络
tags:
  - typecho

---
查找当前主题下的style.css。CSS文件根据主题自行选择可能名称不符。找到以下代码：

<pre><code class="language-css">#comments .comment-author .avatar{display:block;float:left;width:40px;height:40px;margin:1.4rem 1rem 0 0;border-radius:50%}</code></pre>

修改为：

<pre><code class="language-css">#comments .comment-author .avatar{display:block;float:left;width:40px;height:40px;margin:1.4rem 1rem 0 0;border-radius:50%;transition: all 0.5s}
&lt;h1&gt;comments .comment-author .avatar:hover{transform:rotate(360deg)}&lt;/h1&gt;</code></pre>

即可大功告成@(太开心)  
具体演示效果，可参照本博客评论头像，如果你跟我一样使用Hran的主题，可以直接查找替换。

 `transition: all 0.5s` 是表示旋转在0.5秒内完成，可自行修改速度  
 `transform: rotate(360deg)` 表示图片旋转360度，可自行修改

到处逛博客圈，又发现好多好东西，赶紧收藏起来，感谢Destined博主的奉献！

#### Typecho免插件实现博主认证

打开 `comments.php` ，找到下面这条代码：

在后面加上如下代码：[/p>#### Typecho留言加上@

  * 打开模板文件夹里的functions.php文件，添加以下代码:

<pre><code class="language-php">/&lt;em&gt;评论增加@功能&lt;/em&gt;/
function getPermalinkFromCoid($coid) {
$db       = Typecho_Db::get();
$options  = Typecho_Widget::widget(&#039;Widget_Options&#039;);
$contents = Typecho_Widget::widget(&#039;Widget_Abstract_Contents&#039;);
$row = $db-&gt;fetchRow($db-&gt;select(&#039;cid, type, author, text&#039;)-&gt;from(&#039;table.comments&#039;)
-&gt;where(&#039;coid = ? AND status = ?&#039;, $coid, &#039;approved&#039;));
if (empty($row)) return &#039;Comment not found!&#039;;
$cid = $row[&#039;cid&#039;];
$select = $db-&gt;select(&#039;coid, parent&#039;)-&gt;from(&#039;table.comments&#039;)
-&gt;where(&#039;cid = ? AND status = ?&#039;, $cid, &#039;approved&#039;)-&gt;order(&#039;coid&#039;);
if ($options-&gt;commentsShowCommentOnly)
$select-&gt;where(&#039;type = ?&#039;, &#039;comment&#039;);
$comments = $db-&gt;fetchAll($select);
if ($options-&gt;commentsOrder == &#039;DESC&#039;)
$comments = array_reverse($comments);
foreach ($comments as $key =&gt; $val)
$array[$val[&#039;coid&#039;]] = $val[&#039;parent&#039;];
$i = $coid;
while ($i != 0) {
$break = $i;
$i = $array[$i];
}
$count = 0;
foreach ($array as $key =&gt; $val) {
if ($val == 0) $count++;
if ($key == $break) break;
}
$parentContent = $contents-&gt;push($db-&gt;fetchRow($contents-&gt;select()-&gt;where(&#039;table.contents.cid = ?&#039;, $cid)));
$permalink = rtrim($parentContent[&#039;permalink&#039;], &#039;/&#039;);
$page = ($options-&gt;commentsPageBreak)
? &#039;/comment-page-&#039; . ceil($count / $options-&gt;commentsPageSize)
: ( substr($permalink, -5, 5) == &#039;.html&#039; ? &#039;&#039; : &#039;/&#039; );
return array(
"author" =&gt; $row[&#039;author&#039;],
"text" =&gt; $row[&#039;text&#039;],
"href" =&gt; "{$permalink}{$page}#{$row[&#039;type&#039;]}-{$coid}"
);
}  </code></pre>

  * 然后打开你的 `comment.php` 文件，找到以下代码：

在其前面加入如下代码：](mailto:/p>

#### Typecho留言加上@</h4)</p>